<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A Rust board support package (BSP) for the Teensy 4. Supports the Teensy 4.0 and 4.1 boards."><meta name="keywords" content="rust, rustlang, rust-lang, teensy4_bsp"><title>teensy4_bsp - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../teensy4_bsp/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Crate teensy4_bsp</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.3.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all teensy4_bsp's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="teensy4_bsp" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../teensy4_bsp/index.html"><img class="rust-logo" src="../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">teensy4_bsp</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/teensy4_bsp/lib.rs.html#1-150" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A Rust board support package (BSP) for the Teensy 4. Supports the Teensy 4.0 and
4.1 boards.</p>
<p>Peripherals are re-exported from the <a href="imxrt_hal"><code>imxrt-hal</code></a>
hardware abstraction layer. See the HAL’s documentation for more information on creating
and using peripherals.</p>
<h2 id="runtime" class="section-header"><a href="#runtime">Runtime</a></h2>
<p>The <code>teensy4-bsp</code> use the <a href="https://crates.io/crates/cortex-m-rt"><code>cortex-m-rt</code></a> crate to provide a runtime. Enable runtime support using
the <code>&quot;rt&quot;</code> feature. To properly link your program, you <strong>must link with the <code>t4link.x</code> linker
script</strong>.</p>
<p>The <code>teensy4-bsp</code> emits a <code>cortex-m-rt</code>-compatible linker script. The layout supports the i.MX RT’s boot requirements
and advanced memory features. Specifically, the layout includes the image vector table (IVT) and boot data
that’s necessary for i.MX RT processors. Additionally, the layout specifies the FlexSPI configuration block’s (FCB)
FLASH location. Finally, the linker script places all instructions in ITCM, and all data in DTCM.</p>
<p>The <code>teensy4-bsp</code> provides its own reset hander. The custom reset handler</p>
<ul>
<li>initalizes TCM regions</li>
<li>copies instructions into ITCM</li>
<li>copies the vector table into DTCM, and sets VTOR</li>
<li>set’s the CCM’s low-power setting</li>
</ul>
<p>The reset handler then calls the <code>cortex-m-rt</code> entrypoint to finish memory initialization and invoke your program’s
<code>main()</code>.</p>
<h2 id="features" class="section-header"><a href="#features">Features</a></h2>
<p>The <code>teensy4-bsp</code> supports these features:</p>
<div><table><thead><tr><th>Flag</th><th>Description</th><th>Default?</th></tr></thead><tbody>
<tr><td><code>&quot;usb-logging&quot;</code></td><td>Adds support for logging over USB with the <code>log</code> crate</td><td>✓</td></tr>
<tr><td><code>&quot;rt&quot;</code></td><td>Adds runtime support using <code>cortex-m-rt</code></td><td></td></tr>
<tr><td><code>&quot;rtic&quot;</code></td><td>Adds support for using the BSP peripherals with RTIC</td><td></td></tr>
</tbody></table>
</div>
<p>Proper RTIC support requires that you disable the BSP’s default features. You may combine <code>&quot;rtic&quot;</code> with
either <code>&quot;rt&quot;</code> and <code>&quot;usb-logging&quot;</code>.</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies.teensy4-bsp]
default-features = false
features = [&quot;rtic&quot;,  &quot;rt&quot;]
version = # ...</code></pre></div><h2 id="pins" class="section-header"><a href="#pins">Pins</a></h2>
<p>The BSP helps you convert all the i.MX RT processor pads into your Teensy 4’s pins.
From these pins, you may construct peripherals and perform I/O. See the [<code>pins</code>] module
for more information.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<p>Turn on a Teensy 4.0’s LED:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">cortex_m::asm::wfi</span>;
<span class="kw">use</span> <span class="ident">teensy4_bsp</span> <span class="kw">as</span> <span class="ident">bsp</span>;

<span class="kw">use</span> <span class="ident">embedded_hal::digital::v2::OutputPin</span>;

<span class="kw">let</span> <span class="ident">peripherals</span> <span class="op">=</span> <span class="ident">bsp::Peripherals::take</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">pins</span> <span class="op">=</span> <span class="ident">bsp::pins::t40::from_pads</span>(<span class="ident">peripherals</span>.<span class="ident">iomuxc</span>);
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">led</span> <span class="op">=</span> <span class="ident">bsp::configure_led</span>(<span class="ident">pins</span>.<span class="ident">p13</span>);

<span class="kw">loop</span> {
    <span class="ident">led</span>.<span class="ident">set_high</span>().<span class="ident">unwrap</span>();
    <span class="ident">wfi</span>();
}</code></pre></div>
<p>See more examples in the project’s repository.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use teensy4_pins as pins;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use imxrt_hal as hal;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="common/index.html" title="teensy4_bsp::common mod">common</a><span class="stab deprecated" title="">Deprecated</span></div><div class="item-right docblock-short"><p>Use <a href="crate::pins::common"><code>teensy4_bsp::pins::common</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="t40/index.html" title="teensy4_bsp::t40 mod">t40</a><span class="stab deprecated" title="">Deprecated</span></div><div class="item-right docblock-short"><p>Use <a href="crate::pins::t40"><code>teensy4_bsp::pins::t40</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="t41/index.html" title="teensy4_bsp::t41 mod">t41</a><span class="stab deprecated" title="">Deprecated</span></div><div class="item-right docblock-short"><p>Use <a href="crate::pins::t41"><code>teensy4_bsp::pins::t41</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="usb/index.html" title="teensy4_bsp::usb mod">usb</a><span class="stab portability" title="This is supported on crate feature `usb-logging` only"><code>usb-logging</code></span></div><div class="item-right docblock-short"><p>Teensy 4 USB, taken from the original Teensy 4 C libraries</p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Peripherals.html" title="teensy4_bsp::Peripherals struct">Peripherals</a></div><div class="item-right docblock-short"></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.interrupt.html" title="teensy4_bsp::interrupt enum">interrupt</a></div><div class="item-right docblock-short"><p>Available interrupts for this device</p>
</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.EXT_SYSTICK_HZ.html" title="teensy4_bsp::EXT_SYSTICK_HZ constant">EXT_SYSTICK_HZ</a></div><div class="item-right docblock-short"><p>SYSTICK external clock frequency.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.configure_led.html" title="teensy4_bsp::configure_led fn">configure_led</a></div><div class="item-right docblock-short"><p>Configure the board’s LED</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.dtcm_heap_start.html" title="teensy4_bsp::dtcm_heap_start fn">dtcm_heap_start</a></div><div class="item-right docblock-short"><p>Returns the starting location for a DTCM “heap.”</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.heap_len.html" title="teensy4_bsp::heap_len fn">heap_len</a></div><div class="item-right docblock-short"><p>Returns the size of the heap, in bytes.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.heap_start.html" title="teensy4_bsp::heap_start fn">heap_start</a></div><div class="item-right docblock-short"><p>Returns a pointer to the start of the heap</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Led.html" title="teensy4_bsp::Led type">Led</a></div><div class="item-right docblock-short"><p>The LED</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="teensy4_bsp" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0-nightly (83b15bfe1 2021-12-28)" ></div>
</body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A Rust board support package (BSP) for the Teensy 4."><title>teensy4_bsp - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="teensy4_bsp" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0-nightly (794c12416 2025-02-21)" data-channel="nightly" data-search-js="search-f7327375.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-3a5871a4.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-5332ae0c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../teensy4_bsp/index.html">teensy4_<wbr>bsp</a><span class="version">0.5.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#features" title="Features">Features</a></li><li><a href="#runtime" title="Runtime">Runtime</a><ul><li><a href="#environment-variable-overrides" title="Environment variable overrides">Environment variable overrides</a></li></ul></li><li><a href="#notes" title="Notes">Notes</a><ul><li><a href="#srtc-reset-by-loader" title="SRTC reset by loader">SRTC reset by loader</a></li></ul></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#constants" title="Constants">Constants</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>teensy4_bsp</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/teensy4_bsp/lib.rs.html#1-122">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A Rust board support package (BSP) for the Teensy 4.</p>
<p><code>teensy4-bsp</code> supports the following boards:</p>
<ul>
<li>Teensy 4.0</li>
<li>Teensy 4.1</li>
<li>Teensy MicroMod</li>
</ul>
<p>If you’re just getting started with embedded Rust development on the Teensy 4, take
a look at <a href="board/index.html" title="mod teensy4_bsp::board">the <code>board</code> module</a>. This module provides pre-configured drivers
and helper functions to define hardware drivers.</p>
<p>Peripherals are re-exported from the <a href="crate::hal"><code>imxrt-hal</code></a>
hardware abstraction layer. For more information on drivers, consult the <code>imxrt-hal</code> documentation.
Note that <code>imxrt-hal</code> drivers depend on low-level resources from <code>imxrt-ral</code>. For convenience,
the BSP also exposes <a href="crate::ral"><code>imxrt-ral</code></a>. Combine <code>imxrt-hal</code> and <code>imxrt-ral</code> to have full
control of your hardware.</p>
<p>Finally, the BSP provides a runtime to simplify application development. It exposes board pins through
the [<code>pins</code>] module.</p>
<h2 id="features"><a class="doc-anchor" href="#features">§</a>Features</h2>
<p><code>teensy4-bsp</code> supports these features.</p>
<div><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody>
<tr><td><code>"rt"</code></td><td>Adds runtime support using <code>imxrt-rt</code>.</td></tr>
</tbody></table>
</div><h2 id="runtime"><a class="doc-anchor" href="#runtime">§</a>Runtime</h2>
<p>When the runtime is enabled, <code>teensy4-bsp</code> defines the memory map. In order to use the memory map,
you must <strong>link your program with <code>t4link.x</code></strong>.</p>
<p>The memory organization includes</p>
<ul>
<li>320 KiB of DTCM, comprised of
<ul>
<li>a 16 KiB stack.</li>
<li>the vector table.</li>
<li>all zero- and runtime-initialized data (<code>.bss</code>, <code>.data</code>).</li>
</ul>
</li>
<li>192 KiB of ITCM, containing <em>all</em> instructions (<code>.text</code>).</li>
<li>512 KiB of OCRAM, comprised of
<ul>
<li>any uninitialized data (<code>.uninit</code>)</li>
<li>a 16 KiB heap.</li>
</ul>
</li>
</ul>
<p>If the runtime is disabled, then <code>teensy4-bsp</code> does no define the memory map, and it does not
depend on <code>imxrt-rt</code>. Consider disabling the BSP’s runtime feature if you want to implement your
own runtime, or if you want to use <code>imxrt-rt</code> to define your own memory map.</p>
<h3 id="environment-variable-overrides"><a class="doc-anchor" href="#environment-variable-overrides">§</a>Environment variable overrides</h3>
<p>You can override the size of some memory regions by setting environment variables.</p>
<ul>
<li>To change the <em>stack</em> size, set <code>TEENSY4_STACK_SIZE</code> when building.</li>
<li>To change the <em>heap</em> size, set <code>TEENSY4_HEAP_SIZE</code> when building.</li>
</ul>
<p>The examples below show how to set a 4096 byte stack using its environment variable.</p>
<div class="example-wrap"><pre class="language-text"><code>TEENSY4_STACK_SIZE=4096
TEENSY4_STACK_SIZE=4k     # Convenience for multiples of 1024 bytes.
TEENSY4_STACK_SIZE=4K     # Equivalent to the above.</code></pre></div><h2 id="notes"><a class="doc-anchor" href="#notes">§</a>Notes</h2><h3 id="srtc-reset-by-loader"><a class="doc-anchor" href="#srtc-reset-by-loader">§</a>SRTC reset by loader</h3>
<p>When the SRTC is enabled, setting the board into program mode then using the Teensy Loader
application (GUI) to reboot it will set the current time (Unix epoch, but time in local
timezone). This will overwrite whatever time you may have previously set and is ambiguous
around the backwards daylight savings transition point.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.hal"><code>pub use imxrt_hal as hal;</code></dt><dt id="reexport.ral"><code>pub use imxrt_ral as ral;</code></dt><dt id="reexport.rt"><code>pub use imxrt_rt as rt;</code><wbr><span class="stab portability" title="Available on crate feature `rt` only"><code>rt</code></span></dt><dt id="reexport.pins"><code>pub use teensy4_pins as pins;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="board/index.html" title="mod teensy4_bsp::board">board</a></dt><dd>Pre-configured board resources.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.EXT_SYSTICK_HZ.html" title="constant teensy4_bsp::EXT_SYSTICK_HZ">EXT_<wbr>SYSTICK_<wbr>HZ</a></dt><dd>SYSTICK external clock frequency.</dd></dl></section></div></main></body></html>